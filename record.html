<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>狂歡天外19周年夏日回饋，好禮一直抽一直玩</title>
  <meta name="keywords" content="狂歡天外19周年夏日回饋，好禮一直抽一直玩">
  <meta name="description" content="第一階段：ATM 儲值 7/5-7/19。第二階段：線上抽獎 7/19-8/2。活動期間，限定 ATM 儲值滿 1000，或累積 1000 的玩家即可獲得抽獎一次的機會。購買指定 ATM 面額 10000 點數，但可以分別不同指定轉入 3000 點數、3000 點數、1000 點數、1000 點數至遊戲中，那獲得抽獎有 10 次機會。每轉一次，都有獎品，先抽到先獲得。">

  <!-- FB 社群分享 -->
  <meta property="og:locale" content="zh_TW">
  <meta property="og:title" content="狂歡天外19周年夏日回饋，好禮一直抽一直玩">
  <meta property="og:type" content="website">
  <meta property="og:description" content="第一階段：ATM 儲值 7/5-7/19。第二階段：線上抽獎 7/19-8/2。活動期間，限定 ATM 儲值滿 1000，或累積 1000 的玩家即可獲得抽獎一次的機會。購買指定 ATM 面額 10000 點數，但可以分別不同指定轉入 3000 點數、3000 點數、1000 點數、1000 點數至遊戲中，那獲得抽獎有 10 次機會。每轉一次，都有獎品，先抽到先獲得。">
  <meta property="og:url" content="https://這裡放活動網址/">
  <meta property="og:image" content="https://圖檔的絕對路徑/assets/images/fb-1200x640.jpg">
  <!--圖檔路徑需改成絕對路徑-->
  <meta property="og:site_name" content="狂歡天外19周年夏日回饋，好禮一直抽一直玩">

  <!-- <base href="/event/mo_20230607_gashapon/"> -->
  <link rel="stylesheet" href="assets/css/all.css">
</head>
<body>


  <div class="ossian">

    <div class="record">
      <img src="assets/images/record.png" alt="得獎紀錄">
      <ul class="record-list">
        <li><a href="index.html">回首頁</a></li>
        <li><a href="record.html">得獎紀錄</a></li>
      </ul>
    </div>

    <div class="content-padding pb-10">
    <!-- 網站標題................................................................ -->
    <figure class="site-title"><img src="assets/images/title.png" alt="狂歡天外，19周年夏日回饋，一直抽一直玩"></figure>

    <!-- 角色圖.................................................................. -->

    <div>
      <figure class="two-boy"><img src="assets/images/two-boy.png" alt="角色圖"></figure>
    </div>


    <!-- 
      共分為三種狀況
      1. 未登入會員 <div class="records-zone">
      2. 登入會員，並且有一筆以上的資料 <div class="records-zone login">
      3. 登入會員，但沒有任何得獎資料 <div class="records-zone login empty">
     -->
    <div class="records-zone login">
      <ul class="login-member">
        <li><a href="" target="_blank"><img src="assets/images/loginin-member.png" alt="請登入會員"></a></li>
      </ul>
      <ul class="login-empty">
        <li>目前沒有任何得獎資料</li>
      </ul>
      <ul class="record-rows">
        <li>
          <div><img src="assets/images/popup/popup-04.png" alt="獎品圖示"></div>
          <div>2023/07/10 13:25:21</div>
          <div>強化過的隨機英雄卡包</div>
          <div>一組15個</div>
        </li>
        <li>
          <div><img src="assets/images/popup/popup-01.png" alt="獎品圖示"></div>
          <div>2023/07/13 19:03:49</div>
          <div>PS5</div>
          <div>一台</div>
        </li>
        <li>
          <div><img src="assets/images/popup/popup-05.png" alt="獎品圖示"></div>
          <div>2023/07/13 19:03:49</div>
          <div>1-9穩定組合包</div>
          <div>一組9個</div>
        </li>
        <li>
          <div><img src="assets/images/popup/popup-06.png" alt="獎品圖示"></div>
          <div>2023/07/13 19:03:49</div>
          <div>蝦醬料理組</div>
          <div>一組4個</div>
        </li>
        <li>
          <div><img src="assets/images/popup/popup-10.png" alt="獎品圖示"></div>
          <div>2023/07/13 19:03:49</div>
          <div>塑型變化劑</div>
          <div>一組5個</div>
        </li>
      </ul>
      <!-- 當分頁數小於等於1時，請將.page隱藏 -->
      <ul class="page">
        <li><a href="" class="focus">1</a></li>
        <li><a href="">2</a></li>
        <li><a href="">3</a></li>
        <li><a href="">4</a></li>
        <li><a href="">5</a></li>
      </ul>
      <!-- <select onchange="location=this.value;">
        <option value="record.html?page=1">第 1 頁</option>
        <option value="record.html?page=2">第 2 頁</option>
        <option value="record.html?page=3">第 3 頁</option>
      </selec> -->
    </div>


    </div><!--content-padding end-->


  </div><!--ossian end-->






<script>
  // 樂透機及Modal視窗
  const btn = document.querySelector(".btn"); // 按鈕
  const ball = document.querySelector(".ball"); // 樂透彩球
  const modal = document.getElementById("modal"); // modal 視窗
  const closeBtn = document.querySelector(".close"); // 結束 modal 視窗

  // 開啟 modal
  const openModal = () => {
    modal.style.display = "block";
    setTimeout(() => {
      modal.classList.add("fade-in");
    }, 300);
  };

  // 結束
  const closeModal = () => {
    modal.classList.remove("fade-in");
    modal.classList.add("fade-out");
    setTimeout(() => {
      modal.style.display = "none";
      modal.classList.remove("fade-out");
    }, 300);
  };

  const closeModalIfClicked = (event) => {
    if (event.target === modal) {
      closeModal();
      ball.classList.remove("down");
    }
  };

  const handleButtonClick = () => {
    btn.disabled = true;
    btn.classList.add("animate");
    setTimeout(() => {
      btn.classList.remove("animate");
      btn.classList.remove("ball");
      btn.disabled = false;

      ball.classList.add("down");

      setTimeout(() => {
        openModal();
      }, 0);  // 開啟 Modal
    }, 1000); // 按鈕轉動一秒
  };

  btn.addEventListener("click", handleButtonClick);
  closeBtn.addEventListener("click", () => {
    closeModal();
    ball.classList.remove("down");
  });
  modal.addEventListener("click", closeModalIfClicked);


  // AJAX
  function ajaxContent(file, target) {
    const fileExtension = file.split('.').pop().toLowerCase();
    const ajaxTarget = document.querySelector(target);
    const ajaxLoading = document.querySelector('.loading');

    ajaxTarget.style.display = 'block';
    // 淡出效果
    ajaxTarget.classList.add('fade-out');
    ajaxLoading.style.display = 'block';

    const xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function () {
      // 未載入內容
      if (xhr.readyState === 4) {
        ajaxLoading.style.display = 'none';
        // 成功載入內容
        if (xhr.status === 200) {
          // 預設使用JSON
          var data = JSON.parse(xhr.responseText);
          ajaxTarget.innerHTML = '<img src="assets/images/popup/' + data.giftPicPath + '"><br>恭喜您抽到<br>' + data.giftName;
          // 如果是 .json 的格式
          // if (fileExtension === 'json') {
          //   var data = JSON.parse(xhr.responseText);
          //   ajaxTarget.innerHTML = '<img src="' + data.giftPicPath + '"><br>恭喜您抽到' + data.giftName;
            // 如果是 .htm、.html、.php 的格式
          // } else if (fileExtension === 'htm' || fileExtension === 'html' || fileExtension === 'php') {
          //   ajaxTarget.innerHTML = xhr.responseText;
          // }

          // 淡入效果
          ajaxTarget.classList.remove('fade-out');
          ajaxTarget.classList.add('fade-in');
        }
      }
    };

    xhr.open('GET', file, true);
    xhr.send();
  }

  // 更新抽獎券數量
  fetch('data.json') // 讀取 json
  .then(response => response.json())
  .then(data => {
    // 獲得抽獎券張數
    const ticketDiv = document.getElementById("ticketData"); // 獲得 #ticketData
    const userTicket = data.uesrTicket; // 將 json 的 uesrTicket 載入到 userTicket
    ticketDiv.textContent = + userTicket; // 更新網頁上抽獎券的數量
    // 獲得PS5剩餘數量
    const ps5NumEm = document.getElementById("ps5Num"); // 獲得 #ps5Num
    const userPs5 = data.ps5amount; 
    ps5NumEm.textContent = + userPs5;

  })
  .catch(error => {
    console.error('錯誤:', error);
  });
</script>
</body>
</html>